# Projekt előkészítése és indítása

Miután letöltötted az állományt és kicsomagoltad a következő lépés az hogy lépj bele a kicsomagolt mappába.
A mappa struktúrája a következő lesz:

```sh
$ tree UnderGroundArchive
    UnderGroundArchive/
    ┌⎯⎯ .github/     (Github mappa)
    ├── frontend/    (Frontend projekt)
    ├── backend/     (Backend projekt)
    ├── wpf/         (WPF projekt)
    └── mobile/      (Mobile projekt)
```
## Lépésenkét így néz ki a projekt indítása:

---

### 1. XAMPP (Adatbázis) elindítása:
    1. XAMPP program elindítása
    2. APACHE és MYSQL modul melletti start gomb megnyomása

> **Az adatbázis indítása befejeződött.**

### 2. Backend elindítása:
    1. Kiválasztjuk a backend mappát.
    2. A benne lévő `UnderGroundArchive_Backend.sln` file-ra duplán kattintva meg fog nyílni a `Visual Studio`.
    3. Amint megnyílt a legfelső sávon a zöld `➤ https` gombra kattintva elindul a backend.

> **A Backend alkalmazás indítása befejeződött.**

---

### 3. Frontend elindítása:
    1. Visual studio code (VSCode) elindítása.
    2. Bal felső sarokban a Fájl menüpontra kell kattintani.
    3. Ott a mappa megnyitására kell kattintani.
    4. Ki kell keresni azt a mappát ahová leklónoztuk/letöltöttük a projektet.
    5. A `frontend` mappára kattintva rá kell nyomni alul a **Megnyitás** gombra. Ezután meg fog nyilni a mappánk a VSCode-ban.
    6. Legfelső sávban a `Terminal` menüpontban, az **Új terminál megnyitása** gombra kell kattintani.
    7. A terminálba a következő parancsot kiadva:
    ```sh 
    npm i
    ```
    Telepűlni fognak a szükséges csomagok a projekt inditásához.
    8. A szükséges csomagok telepítése után a következő parancs kiadásával elindíthatjuk a **frontendünket**:
    ```sh
    npm run dev
    ```
    9. A terminálban meg fog jelenni a link a következő képpen:

    ```sh
    PS D:\Prog\Vizsgaremek\UnderGroundArchive\asd\UnderGroundArchive\frontend> npm run dev

    > undergroundarchive_frontend@0.0.0 dev
    > vite


    VITE v6.0.11  ready in 284 ms

    ➜  Local:   http://localhost:5173/
    ➜  Network: use --host to expose
    ➜  press h + enter to show help    
    ```
    10. a `CTRL` billentyűt nyomva tartva bal egérgombbal rákattintunk az alábbi linkre `http://localhost:5173/`.

> **A Frontend alkalmazás indítása befejeződött.**

---

### 4. Asztali alkalmazás indítása:
    1. A fő mappában lépj bele a `wpf` nevű mappába.
    2. Ezen a mappán belül lépj bele a `UnderGroundArchive_WPF` nevű mappába.
    3. Ezután kattints a `UnderGroundArchive_WPF.sln` filera duplán ezután el fog indulni a `Visual Studio`.
    4. A felső menüsávban a **➤ UnderGroundArchive_WPF** gombra kattintva el fog indulni az asztali alkalmazásunk.

> **Az Asztali alkalmazás indítása befejeződött.**
---

### 5. Mobil alkalmazás indítása:
    - A mobil alkalmazás indítása 4 lépésből fog állni:
        1. Az Első lépésben a `XAMPP` alkalmazást indítjuk el.
        2. A második lépésben `backend` alkalmazás elindítása.
        3. A harmadik lépésben pedig az `ngrok` nevezetű **api gateaway** programot fogjuk fel konfigurálni.
        4. A negyedik lépésben el fogjuk indítani a `mobil` alkalmazás projektünket.

    ##### 1. Lépés: **XAMPP** alkalmazás indítása a [1. XAMPP (Adatbázis) elindítása](#1-xampp-adatbázis-elindítása) pont alapján.

    ##### 2. Lépés: **Backend** alkalmazás indítása a [2. Backend elindítása:](#2-backend-elindítása) pont alapján.

    ##### 3. Lépés: **Ngrok** alkalmazás letöltése, telepítése, és konfigurálása
            1. Az alkalmazás letöltéséhez és telepítéséhez a segédlet a [Ngrok telepítése](installation#ngrok-telepítése) menüpontban található.
            2. Az Ngrok Konfigurálása a következőképpen történik:
                - Keressük meg az ngrok telepítési mappáját és nyissuk meg az `ngrok.exe` filet. Ezután meg fog jelenni egy termibál az alábbi módon:
                ```sh
                C:\Users\marci\OneDrive\Asztali gép\ngrok-v3-stable-windows-amd64>         
                ```
                - 
            3. A következő lépésben a parancssorba kell a következőket beírni **! Fontos hogy ebben a sorrendben:** 
            
            > **Fontos:** A parancssorban a tokened elé **NEM KELL** a dollár jel (`$`).
            ```sh
            ngrok config add-authtoken $A_KIMÁSOLT_AUTENTIKÁCIÓS_TOKENED          
            ``` 

            ```sh
            ngrok http https://localhost:7197            
            ```

            Ez meg fog nyitni egy "Kaput" a backendhez amivel a mobil alkalmazásunk fog tudni kommunikálni vele és adatokat lekérni. Ezután a parancssorod igy fog kinézni:

            ```sh
            ngrok
            Route traffic by anything: https://ngrok.com/r/iep
            Session Status      online
            Account             $SAJÁT_ACCOUNTOD
            Update              $VERZIÓ_FÜGGŐ
            Version             $SAJÁT_VERZIÓD
            Region              $SAJÁT_RÉGIÓ
            Latency             $SAJÁT_PING
            Web Intreface       http://127.0.0.1:4040
            Forwarding          $SAJÁT_NGROK_URL Példa url-> https://41a9-94-44-119-194.ngrok-free.app -> https://localhost:7197 
            ```

            4. A következő lépés, az hogy kimásolod a `Forwarding` linket;
            
    ####   5. Lépés: **Mobil** alkalmazás projekt indítása
    ##### 1. Mobil alkalmazás indítása előtti beállítások:
        1. Megnyitjuk a mobil alkalmazásunkat a `Undergroundarchive_Mobile.sln` filera duplán kattintva.
        2. A jobb oldali sávon meg fog nyílni egy **Solution Explorer** nevű menü.
        3. Megkeressük a `Services` mappát amit lenyitva ezt fogjuk látni:
        ```sh
        $ tree Services
        Services/
        ┌⎯⎯ ApiService.cs
        └── AuthService.cs
        ```
        4. Dupla kattintással megnyitjuk az `ApiService.cs`-t.
        5. A fileban erre a helyre kell másolnunk az előbb kimásolt `Ngrok` linkünket:
        ```c#
        //Másolás előtt:
        public ApiService()
        {
            _httpClient = new HttpClient();
            _httpClient.BaseAddress = new Uri(""); // <--- SAJÁT_NGROK_URL !!!

            // Statikus JWT token beállítása (csak teszteléshez)
            string jwtToken = "YOUR_JWT_TOKEN_HERE";  // Itt add meg a saját tokenedet!
            _httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", jwtToken);
        }

        //Másolás után:
        public ApiService()
        {
            _httpClient = new HttpClient();
            _httpClient.BaseAddress = new Uri("https://41a9-94-44-119-194.ngrok-free.app"); // <--- SAJÁT_NGROK_URL !!!

            // Statikus JWT token beállítása (csak teszteléshez)
            string jwtToken = "YOUR_JWT_TOKEN_HERE";  // Itt add meg a saját tokenedet!
            _httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", jwtToken);
        }
        ```
        
    ##### 2. A mobil alkalmazás indítása:

    ###### 1. Android emulátoron:
        1. **Visual Studio telepítése és konfigurálása**
        - Győződjünk meg róla, hogy a legfrissebb Visual Studio 2022 verzió van telepítve.
        - A telepítés során válasszuk a **.NET Multi-platform App UI development (MAUI)** munkaterhelést.

        2. **Android SDK és Emulátor telepítése**
        - Nyissuk meg a **Visual Studio Installer** alkalmazást, és ellenőrizzük, hogy az Android SDK és az Emulátor telepítve van.
        - Ha nincs telepítve, adjuk hozzá a szükséges komponenseket.

        3. **Android emulátor beállítása**
        - Nyissuk meg a Visual Studio **Eszközök** menüjében az **Android Device Manager**-t.
        - Hozzunk létre egy új emulátort vagy válasszunk egy előre konfigurált modellt (pl. Pixel 5 – API 30).
        - Indítsuk el az emulátort, és várjuk meg, amíg teljesen betölt.

        4. **Hardveres gyorsítás engedélyezése**
        - Ha az emulátor lassú vagy nem indul el, ellenőrizzük, hogy a hardveres gyorsítás engedélyezve van-e.
        - Windows esetén ellenőrizzük a **Hyper-V** vagy **Intel HAXM** beállításokat.
        - A részletes beállításokat a [hivatalos dokumentációban](https://learn.microsoft.com/hu-hu/xamarin/android/get-started/installation/android-emulator/hardware-acceleration) találjuk.

        5. **USB hibakeresés engedélyezése fizikai eszközön (opcionális)**
            1. Az androidos eszközön lépjünk be a **Beállítások** menübe.
            2. Keressük meg az **Eszköz információk** menüpontot.
            3. Kattintsunk többször a **Build szám** beállításra, amíg meg nem jelenik a "Fejlesztői beállítások feloldva" üzenet.
            4. Lépjünk be a **Fejlesztői beállítások** menüpontba.
            5. Engedélyezzük az **USB hibakeresést**.
            6. Csatlakoztassuk az eszközt USB-kábellel a számítógéphez.
            7. A felugró ablakokban engedélyezzük a kapcsolatot.

        6. **A projekt futtatása az emulátoron vagy fizikai eszközön**
            1. Nyissuk meg a **Visual Studio**-ban a .NET MAUI projektet.
            2. A felső eszköztárban válasszuk ki a kívánt eszközt az **Android Local Devices** listából.
            3. Kattintsunk a futtatás gombra, és várjuk meg, amíg az alkalmazás elindul az emulátoron vagy a csatlakoztatott eszközön.

    ###### 2. Saját eszközön:
        >**! Fontos: A saját eszközön való indítás CSAK androidos készüléken lehetséges.**

        1. Az android eszközünkön be kell lépnünk a beállításokba.
        2. Meg kell keressük az **Eszköz információk** menüpontot.
        3. Itt a **Build szám** menüpontot kell megkeressük, majd meg kell nyomjuk míg azt nem írja a készülék, hogy "Fejlesztői beállítások feloldva".
        4. Azután megkeressük a feloldott menüpontot, beírjuk a beállítások keresőjébe, vagy megkeressük a beállítások főoldalán.
        5. Miután megtaláltuk és rákattintottunk, itt a `Usb debugging` vagy `Usb hibakeresés` menüpontot kell keresnünk és engedélyeznünk kell azt.
        6. A következő lépés, a telefon rácsatlakoztatása **usb kábellel** a számítógépünkre amelyiken a projektet szeretnénk indítani.
        7. Az eszközön a felugró ablakokat mindet el kell fogadnunk és engedélyeznünk kell.
        8. Már nincs más dolgunk mint a a mobil projekten belül amit már megnyitottunk felül ahol el tudjuk indítani az alkalmazásunkat, a mellette lévő kis nyilat lenyitni.
        9. Lenyitás után olyat kell keressünk, hogy `Android Local Devices`, és itt ki kell választanunk az eszközünket
        10. Utolsó lépésként nem kell mást tennünk mint a nyíl melletti gombbal amivel a többi alkalmazást is indítottuk elindítjük az alkalmazásunkat.
    
> **A Mobil alkalmazás indítása befejeződött.**